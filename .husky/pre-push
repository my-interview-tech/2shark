#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ changesets –ø–µ—Ä–µ–¥ push
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ changesets..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª—ã –≤ .changeset/ (–∫—Ä–æ–º–µ README.md –∏ config.json)
if [ -z "$(find .changeset -name "*.md" -not -name "README.md" | head -1)" ]; then
  echo "‚ùå –û—à–∏–±–∫–∞: –ù–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ changeset!"
  echo ""
  echo "üìù –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è changeset –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
  echo "   npm run changeset"
  echo ""
  echo "üí° Changeset –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è:"
  echo "   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π"
  echo "   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"
  echo "   - –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ changelog"
  echo ""
  echo "üîß –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É—é—Ç —Ä–µ–ª–∏–∑–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:"
  echo "   git push --no-verify"
  echo ""
  exit 1
fi

echo "‚úÖ Changeset –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º push..." 